from models import models
from routers.utils import convert_to_datetime_from_unix
from settings import settings


async def client_info_message(client: models.Client) -> str:
    """–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ üóìÔ∏è"""
    # TODO –æ—Ç–ª–∏—á–∞—Ç—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –Ω–∏–∫ –∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –Ω–∏–∫ –≤ —Ç–µ–ª–µ–≥—Ä–∞–º sep='_user_.'
    # –Ω–µ—Ç tg username
    if settings.id_salt == client.username[:7]:
        tg_id = client.username[7:]
        username = client.username
    # –µ—Å—Ç—å tg username
    else:
        username, tg_id = client.username.split(settings.username_salt)

    message = f"üë§ –ò–º—è: <a href='tg://user?id={tg_id}'>{username}</a>\n"
    message += "‚úÖ –°—Ç–∞—Ç—É—Å: <b>–≤–∫–ª—é—á–µ–Ω</b>\n" if client.is_active else "‚ùå –°—Ç–∞—Ç—É—Å: <b>–æ—Ç–∫–ª—é—á–µ–Ω</b>\n"
    message += f"üìä –¢—Ä–∞—Ñ–∏–∫: <b>{client.traffic} Gb</b>\n"
    message += f"üóì –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è: "

    if client.expire_time != 0:
        expire_date = await convert_to_datetime_from_unix(client.expire_time)
        message += f"<b>{expire_date}</b>"

    else:
        message += "<b>–Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ ‚ôæ</b>"

    message += "\n\nüíµ –ö—Ä–∞–π–Ω–µ–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –ß–ò–°–õ–û –Ω–∞ —Å—É–º–º—É –°–£–ú–ú–ê"

    return message


async def confirm_delete_client_message(username: str) -> str:
    """–°–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É–¥–∞–ª–µ–Ω–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞"""
    message = f"–£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è \"{username}\"?"
    return message


def get_help_message() -> str:
    """Help message"""
    message = "<b>–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –±–æ—Ç–∞:</b>\n" \
              "- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –ø–æ–¥–ø–∏—Å–∫–∞–º–∏\n" \
              "- –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—É—á–∏–ª–∏ –ø–æ–¥–ø–∏—Å–∫—É\n\n" \
              "<b>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:</b>\n" \
              "- –î–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É /menu\n" \
              "- –î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –Ω–∏—Ö –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –∏ –Ω–∞–∂–º–∏—Ç–µ \"üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏\", " \
              "–≤—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –æ –∫–æ—Ç–æ—Ä–æ–º —Ö–æ—Ç–∏—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é (—Å—Å—ã–ª–∫—É –Ω–∞ —á–∞—Ç, —Å—Ä–æ–∫ –∏—Å—Ç–µ—á–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏, —Ç—Ä–∞—Ñ–∏–∫, –æ–ø–µ—Ä–∞—Ü–∏–∏)\n" \
              "- –î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º —Å—Ä–æ–∫–æ–º –ø–æ–¥–ø–∏—Å–∫–∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é " \
              "–∏ –Ω–∞–∂–º–∏—Ç–µ \"‚ûï –ù–æ–≤—ã–π –ø–æ–ª—å–∑.\", –¥–∞–ª–µ–µ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–∞—Ä—Ç–æ—á–∫—É –∫–æ–Ω—Ç–∞–∫—Ç–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\n" \
              "- –î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å–ø–∏—Å–∫–∞ –¥–æ–ª–∂–Ω–∏–∫–æ–≤ –∏ –æ–ø–µ—Ä–∞—Ü–∏–π –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é –Ω–∞–∂–º–∏—Ç–µ \"–î–æ–ª–∂–Ω–∏–∫–∏\" –∏ \"–û–ø–µ—Ä–∞—Ü–∏–∏\" —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ"

    return message
